<!DOCTYPE html>

<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style>
#info {
    position: absolute;
    top: 2%;
    width: 100%;
    padding: 10px;
    text-align: center;
    color: #ffff00
}

body {
    overflow: hidden;
}

</style>
</head>

<body>
	<h1>
	1234
	</h1>
	<hr>
	<div id="container" style="float:left; background:pink; width:60vw; height:60vh">
	</div>
	<div id="gui" style="width:35vw; float:right; height:60vh; background:yellow;">
		<button id="toggle" style="width:50%; ">
			toggle
		</button>
		<br>
		<br> Angle:&nbsp
		<input type="text" id="outputAngle" style="width:30%;">
		<br>
		<input type="radio" id="SphereRadio" name="radio" value="Taipei">球體
		<br>
		<input type="radio" id="BoxRadio" name="radio" value="Tiei">方體
		<br>
	</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/84/three.min.js"></script>
<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
 
<script>
	var scene, renderer, camera;
	var controls;
	var mesh, angle = 0,
		turn = false;
	var width, height;

	init();
	animate();

	function objLoader(mesh, url) {
		var loader = new THREE.ObjectLoader();
		loader.load(
			url,
			function(obj) {
				obj.scale.set(3, 3, 3);
				mesh.add(obj);
				//baba.add(obj);
			},
			function(xhr) {
				console.log((xhr.loaded / xhr.total * 100) + '% loaded');
			},

			// Function called when download errors
			function(xhr) {
				console.error('An error happened');
			}
		);
	}

	$("#SphereRadio").click(function() {
		mesh.geometry = new THREE.SphereGeometry(30, 32, 32);
		//mesh.material.color.setHex( 0xff00ff );
		mesh.material.color = new THREE.Color(0xff00ff);
	});

	$("#BoxRadio").click(function() {
		mesh.geometry = new THREE.BoxGeometry(100, 20, 20);
		//mesh.material.color.setHex( 0xff00ff );
		mesh.material.color = new THREE.Color(0xff00ff);
	});

	$("#toggle").click(function() {
		mesh.geometry = new THREE.SphereGeometry(30, 32, 32)
			//mesh.material.color.setHex( 0xff00ff );
		mesh.material.color = new THREE.Color(0xff00ff);
		turn = !turn;
	});

	function init() {
		width = $('#container').innerWidth();
		height = $('#container').innerHeight();
		//console.log(width);
		//console.log('123');

		scene = new THREE.Scene();
		renderer = new THREE.WebGLRenderer();
		renderer.setSize(width, height);
		renderer.setClearColor(0x888888);
		//document.body.appendChild(renderer.domElement);
		$('#container').append(renderer.domElement);

		camera = new THREE.PerspectiveCamera(50, width / height, 1, 1000);
		camera.position.set(0, 200, 200);
		//camera.position.z = 200;
		controls = new THREE.OrbitControls(camera, renderer.domElement);

		var geometry = new THREE.BoxGeometry(100, 20, 20);
		var material = new THREE.MeshBasicMaterial({
			//wireframe: true
			color: 0xffffff
		});

		mesh = new THREE.Mesh(geometry, material);
		scene.add(mesh);

		var gridXZ = new THREE.GridHelper(100, 10, 'red', 'white');
		scene.add(gridXZ);

		var boxMaterial;
		var boxGeometry;
		var boxMesh = new THREE.Mesh(boxGeometry, boxMaterial);
		var SpidermanBaba = boxMesh; //new THREE.Object3D();
		objLoader(SpidermanBaba, '/3W3D/load/sofa-threejs/sofa.json');
		scene.add(SpidermanBaba);
		SpidermanBaba.position.set(20, 7.5, 50);

		window.addEventListener('resize', onWindowResize, false);
	}

	function onWindowResize() {
		width = $('#container').innerWidth();
		height = $('#container').innerHeight();

		camera.aspect = width / height;
		camera.updateProjectionMatrix();
		renderer.setSize(width, height);
	}


	function animate() {
		controls.update();
		if (turn)
			angle += 0.01;
		mesh.rotation.y = angle;
		$('#outputAngle').val(angle.toFixed(2));

		requestAnimationFrame(animate);
		renderer.render(scene, camera);
	}

</script>
</body>

</html>